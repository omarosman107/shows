<!DOCTYPE html>
<html>
<head>
	<title data-react-helmet="true">Watch The Flash</title>
	<link href="css/cwbeta.css" rel="stylesheet" type="text/css">
	<link href="css/graphik-400.css" rel="stylesheet" type="text/css">
	    <meta name="viewport" content="width=device-width">
<style type="text/css">
	@media screen and (max-width: 1098px){
.VideoHero_container_WCS04 {
    position: fixed;
}
}
</style>
</head>
<body style="">
	<div class="container">
		<div class="undefined ft-theme-provider">
			<main class=" ft-header-content" role="main">
				<div class="SeriesDetail_screenShows_2odlk">
					<div class="SeriesDetail_videoHero_10aO7 VideoHero_container_WCS04">
						<div class="VideoHero_wrapper_2z-4G VideoHero_wrapperVideo_3Wro0 VideoHero_fadeImageToVideo_2FO0Z"><img class="VideoHero_videoPoster_JPdyo" src="http://images.cwtv.com/images/cw/show-bg/the-flash.jpg"></div>
					</div>
					<div>
						<div>
							<span style="font-size:0;"></span>
							<div class="Branding_header_2ATyh">
								<div class="Branding_altHeaderReplacement_1-rB6"></div>
								<div class="Branding_headerContainer_1x0g6 SeriesDetail_screenElement_3R-8W">
									<a class="Branding_titleLink_3kB4I">
			 						<h1 class="Branding_title_cAdjj"><img  class="Branding_titleImage_2q4mQ" src="http://images.cwtv.com/images/cw/show-logo-horz/the-flash.png"></h1></a>
									<div class="Branding_tuneInContainer_3BlFU"></div>
								</div>
							</div>
						</div>
						<div>
							<div class="container SeriesDetail_screenElement_3R-8W">
								<div class="TabList_tabList_3hFpU SeriesDetail_tabListNav_2ROLh">
									<div></div>
								</div>
								<div class="SeriesDetail_tabContent_3UcX5">
									

											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>
	  <script type="text/javascript" src="js/fetch.min.js"></script>

	<style>
	          @import "css/graphik-500.css";
	          @import "css/graphik-700.css";
	</style>
	<script type="text/javascript">
var _data = {}

  async function  request(){

_data =  await fetch('theflash.json').then(function(res){return res.json()})
    }

 request();

 
		fetch('http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_the-flash?bust='+Date.now()).then(function(res){return res.json();}).then(function(data){
					var newones = []
					var ids = []
					var serverids = []
					var oldepi = []
			for (var i = data.videos.length - 1; i >= 0; i--) {
				var episodeNum = Number(data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1].split('E')[1])
				var seasonNum = data.videos[i].availability_asset_id.split('-S')[2].split('E')[0] + ''





				if (data.videos[i].fullep) {
					var season = _data[seasonNum]
					console.log(_data[seasonNum][episodeNum - 1],seasonNum + '  '+episodeNum)
					if ( JSON.stringify(_data[seasonNum][episodeNum - 1]) == '{}') {
						console.log('not there')
						console.log(data.videos[i].title)
						 _data[seasonNum][episodeNum] = {
						 	title:data.videos[i].title,
						 	file:`http://hlsioscwtv.warnerbros.com/ioshlskeys/videos/`+data.videos[i].thumbnail.split('thumbs/')[1].split('_')[0] +'_'+ data.videos[i].thumbnail.split('thumbs/')[1].split('_')[1]+'_dai.m3u8'
						 	,id:data.videos[i].guid
						 }


					}else{
					}

			
				}

			}


							loadstuff();

		})
function loadstuff(){
	document.querySelector('.SeriesDetail_tabContent_3UcX5').innerHTML = ''
for(i in _data){
var str = ``
	
	for (z = 0; z < _data[i].length; z++) { 
		if (JSON.stringify(_data[i][z]) == '{}') {continue;}
//				fetch(_data[i][z].file)

  function cwdyres(resulution){

      	 return 'http://images.cwtv.com/thecw/img/w_'+resulution+'.s_mobile.i_video_thumbnail.guid_'+_data[i][z].id+'.jpg'
      }




		str += `
	<div class="Tile_tile_3qaLc videoTiles_tile_3s_K6 Tile_clickable_3dKX4">
													<div class="Tile_imageContainer_2rTWR">
														<a href="${_data[i][z].file}">
														<div>
															<div class="LazyLoad"><img class="Tile_image_19KoQ"  src="http://images.cwtv.com/thecw/img/w_600.s_mobile.i_video_thumbnail.guid_${_data[i][z].id}.jpg"></div>
															<div class="Tile_play_1CN22">
																<svg class="Icon_icon_BJu7i Icon_full_btXpr Icon_white_1pDlt" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24">
																<g>
																	<circle cx="12.041" cy="12.041" id="Oval-3" r="11.041" style="fill:#000;fill-opacity:0;stroke:#fff;stroke-width:2px;"></circle>
																	<g id="arrow">
																		<path d="M17.099,12.444l-7.656,4.352c-0.341,0.194 -0.767,-0.048 -0.767,-0.436l0,-8.703c0,-0.388 0.426,-0.631 0.767,-0.437l7.656,4.352c0.341,0.194 0.341,0.679 0,0.872" id="Fill-1"></path>
																		<path d="M17.099,12.444l-7.656,4.352c-0.341,0.194 -0.767,-0.048 -0.767,-0.436l0,-8.703c0,-0.388 0.426,-0.631 0.767,-0.437l7.656,4.352c0.341,0.194 0.341,0.679 0,0.872Z" id="Stroke-3" style="fill:none;stroke:#fff;stroke-width:0.14px;"></path>
																	</g>
																</g></svg>
															</div>
															
														</div></a>
													</div>
													<div class="Tile_details_9UwiV">
														<div class="Tile_info_28rKd">
															<a class="Tile_title_2XOxg videoTiles_title_3Cta0" href="${_data[i][z].file}">
															<div>
																<div class="Tile_titleWrapper_1Ub6U">
																	<span>S${i} E${z+1} ${_data[i][z].title}</span>
																</div>
															</div></a>
														
														</div>
													</div>
												</div>



		`


	}
	if (str == ``) continue;

	document.querySelector('.SeriesDetail_tabContent_3UcX5').innerHTML += `<div id="season-${i}">
										<div>
											<h1 class="VideosTab_seasonTitle_3WlzC">Season ${i}</h1>
										</div>
										<div class="TileGrid_container_S_Mnl TileGrid_grid-2-1_hAfad">
											<div class="TileGrid_grid_vrnLT">
										
${str}

															
														</div>
													</div>
												
												</div>`
}
}
loadstuff();
	</script>

</body>
</html>